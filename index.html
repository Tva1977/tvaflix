<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TVAFLIX</title>

<style>
body { font-family: Arial, sans-serif; background:#111; color:#fff; margin:0; }
h1 { text-align:center; color:#e50914; margin:20px; }

.container { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; padding:20px; }

.filme { background:#222; padding:10px; border-radius:8px; width:200px; text-align:center; }

.filme img { width:100%; border-radius:5px; }

.filme button {
    padding:6px 10px;
    background:#e50914;
    border:none;
    color:#fff;
    border-radius:5px;
    cursor:pointer;
}

/* PLAYER */
#player {
    display:none;
    position:fixed;
    inset:0;
    background:#000;
    z-index:999;
}

#player iframe {
    width:100%;
    height:100%;
}

#fechar {
    position:absolute;
    top:10px;
    right:10px;
    background:#e50914;
    border:none;
    color:white;
    padding:10px;
    cursor:pointer;
}
</style>
</head>

<body>

<h1>TVAFLIX</h1>

<div class="container" id="container"></div>

<div id="player">
<button id="fechar">Fechar</button>
<iframe id="video" src="" allowfullscreen></iframe>
</div>

<script>
function abrirPlayer(url){
    const video = document.getElementById("video");
    const embed = url.replace("watch?v=", "embed/");
    video.src = embed;
    document.getElementById("player").style.display = "block";
}

document.getElementById("fechar").onclick = () => {
    document.getElementById("player").style.display = "none";
    document.getElementById("video").src = "";
};

fetch('/filmes.json')
.then(r => r.json())
.then(filmes => {
    const container = document.getElementById('container');

    filmes.forEach(filme => {
        const div = document.createElement('div');
        div.className = 'filme';

        div.innerHTML = `
            <img src="${filme.poster}">
            <h3>${filme.titulo}</h3>
            <button onclick="abrirPlayer('${filme.trailer}')">
                ▶ Assistir
            </button>
        `;

        container.appendChild(div);
    });
});
</script>

</body>
</html>
